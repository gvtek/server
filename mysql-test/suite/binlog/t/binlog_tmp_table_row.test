# ==== Purpose ====
#
# Test if statements used temporary tables are not binlogged in the case of
# binlog_format=row
#
# ==== Method ====
#
# We will see if binlog file size is increased or not, It should be constant for the
# entire period of test.
#
# ==== Related bugs ====
#
# Mdev-9266
#
source include/have_log_bin.inc;
source include/have_binlog_format_row.inc;

RESET MASTER;

--echo #Create table test
--let $sql_query= create temporary table t1(a int, b int)
--source suite/binlog/include/check_binlog_size.inc

--echo #Add index test
--let $sql_query= create index index_a on t1(a)
--source suite/binlog/include/check_binlog_size.inc

--echo #drop index test
--let $sql_query= drop index index_a on t1
--source suite/binlog/include/check_binlog_size.inc

--echo #Analyze test
--let $sql_query= analyze table t1
--source suite/binlog/include/check_binlog_size.inc

--echo #Optimize test
--let $sql_query= optimize table t1
--source suite/binlog/include/check_binlog_size.inc

--echo #Repair test
--let $sql_query= repair table t1
--source suite/binlog/include/check_binlog_size.inc

--echo #Check test
--let $sql_query= check table t1
--source suite/binlog/include/check_binlog_size.inc

--echo #Checksum test
--let $sql_query= checksum table t1
--source suite/binlog/include/check_binlog_size.inc

--echo #Rename test
--let $sql_query= rename table t1 to temp_t1
--source suite/binlog/include/check_binlog_size.inc


#should not crash the server
analyze table non_existing;
optimize table non_existing;
repair table non_existing;
